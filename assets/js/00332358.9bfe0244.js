"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[655],{8209:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"storage","title":"Storage","description":"Expo Open OTA supports two storage solutions for hosting your update assets: Amazon S3 and Local File System. This guide will help you set up your storage solution and configure your server to use it.","source":"@site/docs/storage.mdx","sourceDirName":".","slug":"/storage","permalink":"/expo-open-ota/docs/storage","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/storage.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docSidebar","previous":{"title":"Environment variables","permalink":"/expo-open-ota/docs/environment"},"next":{"title":"Prerequisites","permalink":"/expo-open-ota/docs/prerequisites"}}');var t=s(4848),r=s(8453);const a={sidebar_position:2},i="Storage",l={},c=[{value:"Local File System",id:"local-file-system",level:2},{value:"Amazon S3",id:"amazon-s3",level:2}];function d(e){const o={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.header,{children:(0,t.jsx)(o.h1,{id:"storage",children:"Storage"})}),"\n",(0,t.jsxs)(o.p,{children:[(0,t.jsx)(o.strong,{children:"Expo Open OTA"})," supports two storage solutions for hosting your update assets: ",(0,t.jsx)(o.strong,{children:"Amazon S3"})," and ",(0,t.jsx)(o.strong,{children:"Local File System"}),". This guide will help you set up your storage solution and configure your server to use it."]}),"\n",(0,t.jsx)(o.admonition,{type:"note",children:(0,t.jsxs)(o.p,{children:["The environment variables required for each storage solution are listed below, you can set them in a ",(0,t.jsx)(o.code,{children:".env"})," file in the root of the project or keep them in a safe place to prepare for deployment."]})}),"\n",(0,t.jsx)(o.h2,{id:"local-file-system",children:"Local File System"}),"\n",(0,t.jsx)(o.admonition,{type:"warning",children:(0,t.jsx)(o.p,{children:"This storage solution is not recommended for production use. It is intended for development and testing purposes only.\nIf you really want to use it in production, make sure to not have multiple instances of the server running, as the assets are stored locally and not shared between instances."})}),"\n",(0,t.jsxs)(o.p,{children:["To use the local file system as your storage solution, you need to set the ",(0,t.jsx)(o.code,{children:"STORAGE_MODE"})," and ",(0,t.jsx)(o.code,{children:"LOCAL_BUCKET_BASE_PATH"})," environment variable to the path where you want to store your assets. The server will create the necessary directories and store the assets in the specified location."]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"STORAGE_MODE=local\nLOCAL_BUCKET_BASE_PATH=/path/to/your/assets\n"})}),"\n",(0,t.jsx)(o.h2,{id:"amazon-s3",children:"Amazon S3"}),"\n",(0,t.jsx)(o.p,{children:"To enable Amazon S3 as your storage solution, you need to set the following environment variables:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"STORAGE_MODE=s3\nAWS_REGION=your-region\nS3_BUCKET_NAME=your-bucket-name\n"})}),"\n",(0,t.jsx)(o.p,{children:"If your are not using AWS IAM roles, you also need to set the following environment variables:"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-bash",children:"AWS_ACCESS_KEY_ID=your-access-key-id\nAWS_SECRET_ACCESS_KEY=your-secret-access-key\n"})}),"\n",(0,t.jsx)(o.p,{children:"You don't need to allow public read access to the assets, as the server will generate pre-signed URLs for the assets for CDN if configured.\nIf CDN is not configured, the server will return the asset directly."})]})}function u(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,o,s)=>{s.d(o,{R:()=>a,x:()=>i});var n=s(6540);const t={},r=n.createContext(t);function a(e){const o=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(r.Provider,{value:o},e.children)}}}]);