"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[66],{1039:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"introduction","title":"Introduction","description":"Expo Open OTA is an open-source project that allows you to host your own updates server for your Expo application. It is a self-hosted alternative to the official Expo OTA service, implementing the Expo Updates protocol.","source":"@site/docs/introduction.mdx","sourceDirName":".","slug":"/introduction","permalink":"/expo-open-ota/docs/introduction","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/introduction.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docSidebar","next":{"title":"Environment variables","permalink":"/expo-open-ota/docs/environment"}}');var r=s(4848),t=s(8453);const i={sidebar_position:1},l="Introduction",c={},a=[{value:"How It Works",id:"how-it-works",level:2},{value:"1. <code>/manifest</code>",id:"1-manifest",level:3},{value:"2. <code>/assets</code>",id:"2-assets",level:3},{value:"3. <code>/requestUploadUrl</code> &amp; <code>/uploadLocalFile</code>",id:"3-requestuploadurl--uploadlocalfile",level:3},{value:"Why Self-Host Your OTA Update server?",id:"why-self-host-your-ota-update-server",level:2},{value:"1. <strong>Cost Considerations</strong>",id:"1-cost-considerations",level:3},{value:"2. <strong>Full Control Over Your Infrastructure</strong>",id:"2-full-control-over-your-infrastructure",level:3},{value:"3. <strong>Custom Network and Security Constraints</strong>",id:"3-custom-network-and-security-constraints",level:3},{value:"Why Does This Project Rely on Expo?",id:"why-does-this-project-rely-on-expo",level:2},{value:"1. <strong>EAS (Expo Application Services) is Great</strong>",id:"1-eas-expo-application-services-is-great",level:3},{value:"2. <strong>Branch &amp; Release Channel Management</strong>",id:"2-branch--release-channel-management",level:3},{value:"3. <strong>Potential for Future Independence</strong>",id:"3-potential-for-future-independence",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"introduction",children:"Introduction"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Expo Open OTA"})," is an open-source project that allows you to host your own updates server for your Expo application. It is a self-hosted alternative to the official Expo OTA service, implementing the ",(0,r.jsx)(n.a,{href:"https://docs.expo.dev/technical-specs/expo-updates-1/",children:"Expo Updates protocol"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,r.jsxs)(n.p,{children:["Expo Open OTA works by redirecting the ",(0,r.jsx)(n.code,{children:"expo-updates"})," package of your application to a custom OTA server that implements several key endpoints:"]}),"\n",(0,r.jsxs)(n.h3,{id:"1-manifest",children:["1. ",(0,r.jsx)(n.code,{children:"/manifest"})]}),"\n",(0,r.jsxs)(n.p,{children:["This endpoint is called by the Expo application on launch or when executing ",(0,r.jsx)(n.code,{children:"checkForUpdateAsync()"}),". The ",(0,r.jsx)(n.code,{children:"expo-updates"})," package includes several headers in its request:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"expo-channel-name"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"expo-protocol-version"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"expo-platform"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"expo-runtime-version"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Based on these headers, the server determines whether an update is available. The update is retrieved from the branch associated with the given channel in the Expo account."}),"\n",(0,r.jsxs)(n.h3,{id:"2-assets",children:["2. ",(0,r.jsx)(n.code,{children:"/assets"})]}),"\n",(0,r.jsxs)(n.p,{children:["When an update is available, a list of assets is sent back to the client. These assets are accessed via the ",(0,r.jsx)(n.code,{children:"/assets"})," endpoint, which:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Signs and compresses the files."}),"\n",(0,r.jsx)(n.li,{children:"Returns the required assets to the Expo client."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If a CDN is configured, the returned URL is a pre-signed link pointing to a cdn endpoint. Otherwise, the server returns the asset directly."}),"\n",(0,r.jsxs)(n.h3,{id:"3-requestuploadurl--uploadlocalfile",children:["3. ",(0,r.jsx)(n.code,{children:"/requestUploadUrl"})," & ",(0,r.jsx)(n.code,{children:"/uploadLocalFile"})]}),"\n",(0,r.jsxs)(n.p,{children:["These routes are used by the ",(0,r.jsx)(n.code,{children:"eoas"})," package to publish updates to the chosen storage solution, whether it's S3 or a local file system.\n",(0,r.jsx)(n.code,{children:"/uploadLocalFile"})," is used to upload the file to the server when ",(0,r.jsx)(n.a,{href:"/docs/storage#local-file-system",children:"storage mode"})," is set to ",(0,r.jsx)(n.code,{children:"local"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"why-self-host-your-ota-update-server",children:"Why Self-Host Your OTA Update server?"}),"\n",(0,r.jsx)(n.p,{children:"There are several reasons why you might want to self-host your updates instead of relying on the official Expo service:"}),"\n",(0,r.jsxs)(n.h3,{id:"1-cost-considerations",children:["1. ",(0,r.jsx)(n.strong,{children:"Cost Considerations"})]}),"\n",(0,r.jsx)(n.p,{children:"Expo's pricing model for OTA updates is based on the number of Monthly Active Users (MAUs). For large-scale applications, costs can add up quickly. Below is a brief breakdown of their pricing:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"1,000 MAUs"}),": Free"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Next 199,000 MAUs"}),": $0.005 per MAU"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Next 300,000 MAUs"}),": $0.00375 per MAU"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Next 500,000 MAUs"}),": $0.0034 per MAU"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Next 1,000,000 MAUs"}),": $0.003 per MAU"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://expo.dev/pricing",children:"Full pricing details"})}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Self-hosting removes the dependency on Expo's pricing structure, giving you full control over your costs."}),"\n",(0,r.jsxs)(n.h3,{id:"2-full-control-over-your-infrastructure",children:["2. ",(0,r.jsx)(n.strong,{children:"Full Control Over Your Infrastructure"})]}),"\n",(0,r.jsx)(n.p,{children:"By hosting your own OTA server, you can:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Store update files on your own infrastructure."}),"\n",(0,r.jsx)(n.li,{children:"Secure your files using custom certificates and authentication mechanisms."}),"\n",(0,r.jsx)(n.li,{children:"Ensure compliance with specific security requirements."}),"\n"]}),"\n",(0,r.jsxs)(n.h3,{id:"3-custom-network-and-security-constraints",children:["3. ",(0,r.jsx)(n.strong,{children:"Custom Network and Security Constraints"})]}),"\n",(0,r.jsxs)(n.p,{children:["One of the key motivations for this project came from my experience at ",(0,r.jsx)(n.strong,{children:"Skeat"})," (",(0,r.jsx)(n.a,{href:"https://skeatapp.com",children:"skeatapp.com"}),"), where we needed to deploy applications within highly controlled network environments. Many of our clients operate in restricted setups where:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Internet access is limited."}),"\n",(0,r.jsx)(n.li,{children:"Network traffic must be routed through proxies and VPNs."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Self-hosting an Expo OTA server allows ",(0,r.jsx)(n.strong,{children:"full control"})," over network flows, ensuring seamless deployments even in highly secured environments."]}),"\n",(0,r.jsx)(n.h2,{id:"why-does-this-project-rely-on-expo",children:"Why Does This Project Rely on Expo?"}),"\n",(0,r.jsx)(n.p,{children:"Although we self-host OTA updates, Expo remains an essential part of our workflow for several reasons:"}),"\n",(0,r.jsxs)(n.h3,{id:"1-eas-expo-application-services-is-great",children:["1. ",(0,r.jsx)(n.strong,{children:"EAS (Expo Application Services) is Great"})]}),"\n",(0,r.jsxs)(n.p,{children:["EAS provides powerful features for ",(0,r.jsx)(n.strong,{children:"building, signing, and submitting applications"}),". These functionalities are industry-standard and difficult to replace, making them ",(0,r.jsx)(n.strong,{children:"worth every penny"}),"."]}),"\n",(0,r.jsxs)(n.h3,{id:"2-branch--release-channel-management",children:["2. ",(0,r.jsx)(n.strong,{children:"Branch & Release Channel Management"})]}),"\n",(0,r.jsxs)(n.p,{children:["We currently use Expo's API to authenticate uploads and manage ",(0,r.jsx)(n.strong,{children:"branch-to-release channel mappings"}),", ensuring smooth versioning and deployment."]}),"\n",(0,r.jsxs)(n.h3,{id:"3-potential-for-future-independence",children:["3. ",(0,r.jsx)(n.strong,{children:"Potential for Future Independence"})]}),"\n",(0,r.jsx)(n.p,{children:"At present, this project relies on Expo for managing release channels and branches. However, we aim to implement our own release and versioning logic in the future. This would allow for greater autonomy, reducing dependence on Expo while maintaining flexibility for developers."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:["By self-hosting ",(0,r.jsx)(n.strong,{children:"Expo Open OTA"}),", you gain the flexibility, security, and control needed for large-scale or restricted-network deployments, while still benefiting from Expo's powerful development tools."]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var o=s(6540);const r={},t=o.createContext(r);function i(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);